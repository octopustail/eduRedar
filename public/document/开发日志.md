[Mac VS Code快捷键](https://segmentfault.com/a/1190000012811886)
# 2019.1.23

## 任务

**开发环境搭建**：
express服务器 + webpack打包工具

## 遇见问题

webpack-dev-server启动服务报错。

> Path must be a string, Received true (startup error)

查到应该是版本冲突的问题。但是不确定是那些包出现了问题。嫌疑人是webpack-dev-server的版本问题。没有搜索到没有确切的答案。
对webpack-dev-server进行降级。将它降到3.1.x。错误信息变成了：

> TypeError: Cannot destructure property `compile` of 'undefined' or 'null'.

有搜到确切的答案，确定是webpack-dev-server版本问题。
将其降级到3.0.0，服务器启动成功。

## 谈感想

配webpack+node的环境真的很烦。这已经不是第一次遇到包版本冲突的问题了。真的很影响心态。但是还好这次没有被包版本问题劝退，说明自己还是有些许进步的（呵呵）。包版本冲突这个问题也只能摸着石头过河一步一步看一步一步解决了。

## 下一步

开发前端组件。暂时先用mock数据开发。
先把视图开发出来。
先暂时不用React等框架。

# 1.25

# 任务
还是尝试用React框架进行开发。所以先配置好React+Redux框架

# 如何在React中使用D3

> 参考资料：[Data Visualization in React using React D3](https://blog.logrocket.com/data-visualization-in-react-using-react-d3-c35835af16d0)
**要点：**
把渲染的方法放在ComponentDidMount()阶段调用。
数据通过props从父亲节点出传来（父亲节点负责请求数据）

# 总结
React开发环境配置：
React+Redux
React Hot Loader
HMR

React的模版。
Redux异步请求 - 之后需要使用saga来完成。

# 2.27 将zuma视图整合到了React中
数据依然mock数据，用$.getJSON的方式获取的。
渲染的接口是zumaGraph提供的zumaGraph.create(dom,dataArray)函数。
在数据库搭建起来之后，应该改成在ComponentDidMount阶段发出请求数据的action，请求的数据应该是在后台进行处理，传给前台的数据应该是直接可以放到组件中渲染的。通过props将数据传回来。
数据处理的部分，暂时是放在GetJSON中，之后应该把他写成组件的方法。交给zumaGraph.create函数的的参数应该是处理好的数据。
在componentDidUpdate里面也应该可以调用ZumaGraph.create()函数。

# 2.28
### Done
1. 在zumaGraph视图中模块化引入了css
2. 把多轴散点图引入了，但是感觉效果不是很好，需要调整。
3. zumaGraph之后可能存在新的数据来了之后的适配问题。得想办法解决一下
4. 配置了css的formatting工具csscomb

### Todo
1. 其他视图的设计实现（重要）
2. 引入saga，用saga的来进行数据的获取（视图设计完毕之后再做）


# 3.4
### 完成
1. redarGraph坐标轴的完成
### 遇见问题
##### 1. r坐标轴分段 axis.ticks()
[绘制极坐标的参考](https://www.bbsmax.com/A/nAJvmM0Gzr/)
[axis.ticks详解](https://www.tangshuang.net/3270.html)
对坐标轴分段是和坐标轴domain有关系的。
ticks的参数t满足的条件： domain = t * （1 | 2| 5|10 |以及1、2、5、10的倍数） 
### TODO
1. RedarGraph 凌晨时间比例尺的缩放
2. 数据的处理以及数据的绘制


# 3.5
### 完成
1. ReaderGraph绘制
### 遇见问题
1. d3 v3、v4 API有变化导致的bug。
2. 一直以为时间显示有问题，后来发现是画布太小。。。

### TOTO
1. 搭建数据库
2. 完成视图向数据库请求数据（saga）
3. 数据的提取部分应该放在后台、适应视图的数据格式转换应该放在前台。

# 3.6
### 完成
1. 临时数据库测试数据集加入。通过json文件导入数据
[导入json文件到mongodb](https://www.jianshu.com/p/56f9020b79a2)
2. 数据库服务器配置好了

### 遇见问题
1. record数据需要重新处理。
```
{
    {
        "sid":"2039304920";
        "food":[
                    {"sdate":"2013-03-12",
                     "stime":"12:32:02",
                     "stype":"food",
                     "scost":"0.01"},
                ];
        "shower":[{},{},{}];
        "library":[{},{},{}];
        "water":[{},{},{}];
    },
    {
        "sid":"2039304921";
        "food":[
                    {"sdate":"2013-03-12",
                     "stime":"12:32:02",
                     "stype":"food",
                     "scost":"0.01"},
                ];
        "shower":[{},{},{}];
        "library":[{},{},{}];
        "water":[{},{},{}];
    }
}

```
2. '/api'的请求不能代理到代理服务器上。问题可能出在原服务器上，因为，源服务器并不能正确的处理api

# 3.7 
### 完成
1. 代理服务器配置完毕。项目前台服务器由```webpack-dev-server```搭建，用```npm run start-dev```启动，端口为8080，后台api服务器由express搭建，用```npm run start-api```启动，端口为3033。前端收取到的数据请求将由api服务器代理。接口api的添加需要在webpack-dev-server的```proxy```配置项中添加。
### 遇见的问题
1. 本来想把前台发的请求全部代理到api服务器的```/api```接口，然后由```api```接口负责调用Router的方式转发。然而不知道为什么，在apiServer中并不能让```api```调用Router

# 3.11
### 完成
1. Redux-saga初步达成，可以后后台进行数据交互。
|
|--personSaga：个人数据请求的saga
|--generalSaga：总体数据请求的saga（还没有做）

2. 关于组件结构设计：个人组件应该属于总体组件。个人组件应该当成一个dump组件。
### 遇见的问题
1. 比如说组件没有引入正确
2. 没有写好fetch
### TODO
1. 其他组件的设计实现
2. 数据库的引入